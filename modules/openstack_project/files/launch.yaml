---
- hosts: localhost
  connection: local
  gather_facts: False
  roles:
    - common
    - launch_keypair
    - role: launch_node
      cloud: "{{ item.cloud|default('rax') }}"
      region_name: "{{ item.region_name|default('dfw') }}"
      name: "{{ item.name }}"
      image_name: "{{ item.image_name }}"
      flavor_ram: "{{ item.flavor_ram }}"
      flavor_include: "{{ item.flavor_include|default(omit) }}"
      group: "{ item.group }}"
      provision_group: "{{ item.provision_group }}"
      volumes: "{{ item.volumes }}"
      with_items: hosts
- hosts: ubuntu_hosts
  remote_user: ubuntu
  sudo: yes
  roles:
    - common
    - mount_volumes
    - bootstrap
- hosts: centos_hosts
  remote_user: root
  roles:
    - common
    - mount_volumes
    - bootstrap
- hosts: fedora_hosts
  remote_user: cloud-user
  sudo: yes
  roles:
    - common
    - mount_volumes
    - bootstrap
