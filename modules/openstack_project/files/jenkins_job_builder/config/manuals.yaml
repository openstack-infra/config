# in zuul/layout.yaml specified to only run against stable/grizzly
- job:
    name: gate-openstack-manuals-validate
    node: bare-precise

    builders:
      - gerrit-git-prep
      - shell: "./tools/validate.py"

    publishers:
      - console-log

# in zuul/layout.yaml specified to only run against master branch.
- job:
    name: openstack-docs-site
    node: bare-precise

    builders:
      - gerrit-git-prep

    publishers:
      - ftp:
          site: docs.openstack.org
          source: 'www/**'
          target: ''
          remove-prefix: 'www/'
          excludes: ''
      - console-log

- job-template:
    name: 'openstack-operations-guide-{lang}'
    node: bare-precise
    github-org: openstack

    properties:
      - inject:
          script-file: /usr/local/jenkins/slave_scripts/docbook-properties.sh
          properties-file: gerrit-doc.properties

    builders:
      - gerrit-git-prep
      - shell: |
          #!/bin/bash -xe
          source /usr/local/jenkins/slave_scripts/select-mirror.sh openstack openstack-ops
          tox -v -e buildlang -- {lang}

    publishers:
      - console-log
      - upload-to-docs-site
