- job-template:
    name: 'gate-infra-{name}'
    node: '{node}'

    builders:
        - revoke-sudo
        - gerrit-git-prep
        - docs:
            github-org: '{github-org}'
            project: 'infra-{name}'

    publishers:
        - upload-sphinx-draft
        - console-log

- job-template:
    name: 'infra-{name}'
    node: 'node'

    builders:
        - revoke-sudo
        - gerrit-git-prep
        - docs:
            github-org: '{github-org}'
            project: 'infra-{name}'

    publishers:
        - console-log
        - ftp:
            site: '{doc-publisher-site}'
            source: 'doc/build/html/**'
            target: 'infra/{name}'
            remove-prefix: 'doc/build/html'
            excludes: ''

- job-group:
    name: infra-publish-jobs
    jobs:
        - 'gate-infra-{name}'
        - 'infra-{name}'
