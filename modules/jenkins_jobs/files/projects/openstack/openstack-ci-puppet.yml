---
# gate-ci-puppet-merge
main:
  name: 'gate-ci-puppet-merge'
  review_site: 'review.openstack.org'
  github_org: 'openstack'
  project: 'openstack-ci-puppet'
  concurrent: 'true'

triggers:
  - zuul

builders:
  - gerrit_git_prep

scm:
  scm: 'false'

assignednode:
  node: 'precise'

---
# gate-ci-puppet-syntax
main:
  name: 'gate-ci-puppet-syntax'
  review_site: 'review.openstack.org'
  github_org: 'openstack'
  project: 'openstack-ci-puppet'
  concurrent: 'true'

triggers:
  - zuul

builders:
  - gerrit_git_prep
  - puppet_syntax
  - pyflakes

scm:
  scm: 'false'

assignednode:
  node: 'precise'

---
# silent-ci-puppet-apply
main:
  name: 'silent-ci-puppet-apply'
  review_site: 'review.openstack.org'
  github_org: 'openstack'
  project: 'openstack-ci-puppet'
  concurrent: 'true'

triggers:
  - zuul

builders:
  - gerrit_git_prep
  - shell: |
      #!/bin/bash -xe
      csplit -sf puppetapplytest manifests/site.pp '/^$/' {*}
      sed -i -e 's/^[^[:space:]]/#&/g' puppetapplytest*
      find ./ -name puppetapplytest* -print -exec cat {} \; -exec puppet apply --modulepath=./modules -v --noop --debug {} \;

scm:
  scm: 'false'

assignednode:
  node: 'precise'
