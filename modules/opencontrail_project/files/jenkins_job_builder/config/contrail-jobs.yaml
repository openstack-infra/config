- job-template:
    name: 'ci-{name}-unittest'
    node: juniper-tests

    wrappers:
      - timeout:
          timeout: 600
          fail: true
      - timestamps

    builders:
      - gerrit-git-prep
      - shell: |
          #!/bin/bash -xe
          export USER=jenkins
          export JOB_NAME={name}
          /usr/bin/contrail-ci-run ruby /usr/local/jenkins/slave_scripts/contrail-git-prep.rb
          /usr/local/jenkins/slave_scripts/contrail-unittests-job.sh

- job-template:
    name: 'ci-{name}-systest'
    node: juniper-tests

    wrappers:
      - timeout:
          timeout: 600
          fail: true
      - timestamps

    builders:
      - gerrit-git-prep
      - shell: |
          #!/bin/bash -xe
          export USER=jenkins
          export JOB_NAME={name}
          export CONTRAIL_VNC_PRIVATE=1
          /usr/bin/contrail-ci-run ruby /usr/local/jenkins/slave_scripts/contrail-git-prep.rb
          /usr/local/jenkins/slave_scripts/contrail-systest-job.rb

- job-group:
    name: contrail-unittest-jobs
    jobs:
      - 'ci-{name}-unittest'

- job-group:
    name: contrail-systest-jobs
    jobs:
      - 'ci-{name}-systest'

