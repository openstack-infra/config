- job-template:
    name: 'ci-{name}-unittest'
    node: juniper-tests

    wrappers:
      - timeout:
          timeout: 600
          fail: true
      - timestamps

    builders:
      - shell: |
          #!/bin/bash -xe
          export USER=jenkins
          export JOB_NAME={name}
          /usr/bin/ci_setup.sh
          ruby /usr/local/jenkins/slave_scripts/contrail-git-prep.rb
          ruby /usr/local/jenkins/slave_scripts/contrail-unittests-job.sh

- job-template:
    name: 'ci-{name}-systest'
    node: juniper-tests

    wrappers:
      - timeout:
          timeout: 600
          fail: true
      - timestamps

    builders:
      - shell: |
          #!/bin/bash -xe
          export USER=jenkins
          export JOB_NAME={name}
          /usr/bin/ci_setup.sh
          ruby /usr/local/jenkins/slave_scripts/contrail-git-prep.rb use_private
          ruby /usr/local/jenkins/slave_scripts/contrail-systest-job.rb

- job-template:
    name: 'ci-{name}-devstack'
    node: 'devstack-tests'

    builders:
      - shell: |
          #!/bin/bash -xe
          export USER=jenkins
          export JOB_NAME={name}
          /usr/bin/ci_setup.sh
          ruby /usr/local/jenkins/slave_scripts/contrail-git-prep.rb
          /usr/local/jenkins/slave_scripts/contrail-devstack-job.sh

- job-group:
    name: contrail-unittest-jobs
    jobs:
      - 'ci-{name}-unittest'

- job-group:
    name: contrail-systest-jobs
    jobs:
      - 'ci-{name}-systest'

- job-group:
    name: contrail-devstack-jobs
    jobs:
      - 'ci-{name}-devstack'

