# This file is managed by puppet.
# https://github.com/openstack/openstack-ci-puppet

[gerrit]
	basePath = git
	canonicalWebUrl = <%= canonicalweburl %>
[database]
	type = MYSQL
	hostname = localhost
	database = reviewdb
	username = gerrit2
#This limit must be several units higher than the total number of
#httpd and sshd threads as some request processing code paths may need
#multiple connections.
# database.poolLimit = 1 + max(sshd.threads,sshd.batchThreads) + sshd.streamThreads + sshd.commandStartThreads + httpd.acceptorThreads + httpd.maxThreads 
# http://groups.google.com/group/repo-discuss/msg/4c2809310cd27255
# or "2x sshd.threads"
# http://groups.google.com/group/repo-discuss/msg/269024c966e05d6a
	poolLimit = 150  # 1 + 100 + 9 + 2 + 2 + 25 = 139(rounded up)
        connectionpool = true
[auth]
	type = OPENID_SSO
	openIdSsoUrl = <%= openidssourl %>
	cookieSecure = true
	contributorAgreements = true
[sendemail]
	smtpServer = localhost
[container]
	user = gerrit2
	javaHome = /usr/lib/jvm/java-6-openjdk/jre
# http://groups.google.com/group/repo-discuss/msg/269024c966e05d6a
	heapLimit = 8g
[core]
	packedGitOpenFiles = 4096
	packedGitLimit = 400m
	packedGitWindowSize = 16k 	
[sshd]
	listenAddress = *:29418
# http://groups.google.com/group/repo-discuss/browse_thread/thread/b91491c185295a71
	threads = 100       # estimate a 30G server will support up to 650
[httpd]
	listenUrl = proxy-https://*:8081/
	acceptorThreads = 2 # default (per doc)
	minThreads = 5      # default (per doc)
	maxThreads = 25     # default (per doc)
[cache]
	directory = cache
[cache "web_sessions"]
	maxAge = 1d
[user]
	email = <%= email %>
<% commentlinks.each do |commentlink| -%>
[commentlink "<%= commentlink['name'] %>"]
        match = "<%= commentlink['match'] %>"
        link = "<%= commentlink['link'] %>"
<% end -%>
[theme]
        backgroundColor = ffffff
        topMenuColor = ffffff
        textColor = 264d69
        trimColor = eef3f5
        selectionColor = d1e6ea
	changeTableOutdatedColor = f5cccc
